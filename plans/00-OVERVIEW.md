# HarvestIQ Project Overview

## What is HarvestIQ?

Multi-tenant SaaS construction project management platform with AI-powered insights. Track schedules, budgets, documents, payments, task items, and reminders across multiple projects with conversational AI for querying data.

## Core Purpose

Help construction developers:
- Manage multiple projects simultaneously
- Track schedules from overall project down to individual tasks
- Maintain itemized budgets and track spending
- Upload and organize documents (invoices, estimates, contracts)
- Track payments, invoices, and outstanding balances
- Manage task items and reminders with notifications
- Query data naturally using AI conversation
- Learn from project data to build more efficiently

## SaaS Model

- Multi-tenant architecture with builder-level isolation
- Builders (subscribers) as top-level tenants
- Each builder has organizations, users, and projects
- Subscription-based access (free, pro, enterprise tiers)
- Storage quotas per builder

## Users

- Multi-user team access within each builder
- Role-based permissions (Admin, Member)
- Email and SMS notifications

## Tech Stack

| Layer | Technology |
|-------|------------|
| Frontend | Next.js 15, React 19, TypeScript, Tailwind CSS |
| Backend | Express 5, TypeScript |
| Database | PostgreSQL (Railway) with pgvector |
| File Storage | Cloudflare R2 |
| Hosting | Vercel (frontend), Railway (backend) |
| Notifications | SendGrid (email), Twilio (SMS), In-app |
| AI | Claude API, OpenAI embeddings |
| Job Queue | pg-boss (PostgreSQL-based) |

## Implementation Phases

| Phase | Focus | Status |
|-------|-------|--------|
| 1 | Infrastructure & Authentication | Pending |
| 2 | Core Data Models | Pending |
| 3 | Feature Implementation | Pending |
| 4 | AI Integration | Pending |

## Phase Documents

- [01-INFRASTRUCTURE.md](./01-INFRASTRUCTURE.md) - Auth, teams, jobs, storage setup
- [02-DATA-MODELS.md](./02-DATA-MODELS.md) - Database schemas and API endpoints
- [03-FEATURES.md](./03-FEATURES.md) - User-facing functionality
- [04-AI-INTEGRATION.md](./04-AI-INTEGRATION.md) - Conversational AI layer
- [05-SECURITY.md](./05-SECURITY.md) - Security architecture and audit plan

## Implementation Order

Back to front:
1. Database tables and migrations
2. API endpoints
3. Frontend pages

## Key Architectural Decisions

### Multi-Tenancy
- Every table includes `builder_id` for tenant isolation
- JWT tokens include `builder_id` in payload
- All queries filter by builder context first

### Background Processing
- Job queue for async operations
- Scheduled notifications via background workers
- Document text extraction and embedding generation

### AI Integration
- Conversation history persisted in database
- Document embeddings for semantic search (pgvector)
- Learned patterns stored for baseline comparisons
- Proactive insights generated by background jobs
